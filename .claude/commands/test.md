Write tests for this code. Use pytest for backend, vitest for frontend.